# ğŸš€ Qlibå¤šæ¨¡å‹æ™ºèƒ½é‡åŒ–åˆ†æç³»ç»Ÿ

>
> ä»¥ä¸‹å†…å®¹å‡ç”±AIè‡ªåŠ¨ç”Ÿæˆï¼Œå¯èƒ½æœ‰æè¿°ä¸å‡†ç¡®çš„åœ°æ–¹ï¼Œä»¥å®é™…ä½¿ç”¨æƒ…å†µä¸ºå‡†
>

åŸºäºDockerçš„ä¸“ä¸šè‚¡ç¥¨é‡åŒ–åˆ†æå¹³å°ï¼Œé›†æˆqlibæ¡†æ¶å’Œå¤šç§æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œæä¾›å®Œæ•´çš„æŠ€æœ¯åˆ†æå’Œæ™ºèƒ½é¢„æµ‹åŠŸèƒ½ã€‚

## ğŸ“Š ç³»ç»Ÿç‰¹æ€§

- **ğŸ¯ å¤šæ¨¡å‹èåˆ**: é›†æˆ15+æœºå™¨å­¦ä¹ æ¨¡å‹ + 5ç§æŠ€æœ¯åˆ†ææ¨¡å‹
- **ğŸ”§ åŠ¨æ€æƒé‡åˆ†é…**: åŸºäºæ¨¡å‹ç½®ä¿¡åº¦æ™ºèƒ½è°ƒæ•´æƒé‡
- **ğŸ“ˆ å®æ—¶è‚¡ç¥¨åˆ†æ**: æ”¯æŒä»»æ„ç¾è‚¡è‚¡ç¥¨çš„æ·±åº¦åˆ†æ
- **ğŸ³ Dockerå®¹å™¨åŒ–**: ä¸€é”®éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»ï¼Œè·¨å¹³å°å…¼å®¹
- **ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨å’ŒMarkdownåˆ†ææŠ¥å‘Š
- **âš¡ é«˜æ€§èƒ½è®¡ç®—**: ä¼˜åŒ–çš„æ•°æ®å¤„ç†å’Œæ¨¡å‹è®­ç»ƒæµç¨‹

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
ğŸ“¦ qlib-analysis-system/
â”œâ”€â”€ ğŸ³ Dockerç¯å¢ƒ
â”‚   â”œâ”€â”€ qlibæ ¸å¿ƒæ¡†æ¶
â”‚   â”œâ”€â”€ PyTorch + XGBoost + CatBoost
â”‚   â””â”€â”€ ç§‘å­¦è®¡ç®—æ ˆ (pandas, numpy, sklearn)
â”œâ”€â”€ ğŸ¤– æœºå™¨å­¦ä¹ æ¨¡å‹
â”‚   â”œâ”€â”€ qlibåŸç”Ÿæ¨¡å‹ (LGB, XGB, GRU, LSTM, Linear)
â”‚   â””â”€â”€ ç¬¬ä¸‰æ–¹æ¨¡å‹ (MLP, Ridge, SVM, RandomForestç­‰)
â”œâ”€â”€ ğŸ“ˆ æŠ€æœ¯åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ è¶‹åŠ¿è·Ÿè¸ª (MA, MACD)
â”‚   â”œâ”€â”€ åŠ¨é‡æŒ¯è¡ (RSI, ROC)
â”‚   â””â”€â”€ é‡ä»·åˆ†æ (Volume, Bollinger)
â””â”€â”€ ğŸ“Š æ™ºèƒ½å†³ç­–ç³»ç»Ÿ
    â”œâ”€â”€ åŠ¨æ€æƒé‡åˆ†é…
    â”œâ”€â”€ é£é™©è¯„ä¼°
    â””â”€â”€ æŠ•èµ„å»ºè®®ç”Ÿæˆ
```

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### ä¸»æœºç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS, Linux
- **Docker**: Docker Desktop 4.0+
- **Python**: Python 3.8+ (ç”¨äºè¿è¡Œæ§åˆ¶è„šæœ¬)
- **å†…å­˜**: å»ºè®®8GB+
- **å­˜å‚¨**: è‡³å°‘5GBå¯ç”¨ç©ºé—´

### ç½‘ç»œè¦æ±‚

- èƒ½å¤Ÿè®¿é—®Docker Hub (æ‹‰å–é•œåƒ)
- èƒ½å¤Ÿè®¿é—®Yahoo Finance API (è·å–è‚¡ç¥¨æ•°æ®)
- ç«¯å£8888å¯ç”¨ (Jupyter Notebook, å¯é€‰)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬1æ­¥: ç¯å¢ƒå‡†å¤‡

1. **å®‰è£…Docker Desktop**

   ```bash
   # Windows/macOS: ä¸‹è½½Docker Desktopå®˜æ–¹å®‰è£…åŒ…
   # https://www.docker.com/products/docker-desktop
   
   # Linux (Ubuntu/Debian):
   sudo apt update
   sudo apt install docker.io docker-compose
   sudo systemctl start docker
   sudo usermod -aG docker $USER
   ```

2. **éªŒè¯Dockerå®‰è£…**

   ```bash
   docker --version
   docker-compose --version
   ```

3. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <é¡¹ç›®åœ°å€>
   cd qlib-analysis
   ```

### ç¬¬2æ­¥: Dockerç¯å¢ƒéƒ¨ç½²

1. **å¯åŠ¨Dockerå®¹å™¨**

   ```bash
   # ä½¿ç”¨docker-composeä¸€é”®å¯åŠ¨
   docker-compose up -d
   
   # æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼ˆå¦‚æœæ²¡æœ‰docker-compose.ymlï¼‰
   docker run -d --name qlib_jupyter \
     -v $(pwd):/workspace \
     -p 8888:8888 \
     microsoft/qlib:latest
   ```

2. **éªŒè¯å®¹å™¨è¿è¡ŒçŠ¶æ€**

   ```bash
   docker ps
   # åº”è¯¥çœ‹åˆ° qlib_jupyter å®¹å™¨åœ¨è¿è¡Œ
   ```

3. **æ£€æŸ¥qlibå®‰è£…**

   ```bash
   python run_in_docker.py --command "python -c 'import qlib; print(f\"âœ… Qlibç‰ˆæœ¬: {qlib.__version__}\")'"
   ```

### ç¬¬3æ­¥: ä¾èµ–å®‰è£…

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ…ï¼š

**æ ¸å¿ƒä¾èµ–** (å®¹å™¨ä¸­é¢„è£…):

- `qlib` - é‡åŒ–åˆ†ææ¡†æ¶
- `torch` - PyTorchæ·±åº¦å­¦ä¹ 
- `xgboost` - æ¢¯åº¦æå‡æ¨¡å‹
- `catboost` - CatBoostæ¨¡å‹
- `pytorch-tabnet` - TabNetæ¨¡å‹

**æ•°æ®ç§‘å­¦æ ˆ**:

- `pandas, numpy` - æ•°æ®å¤„ç†
- `scikit-learn` - æœºå™¨å­¦ä¹ 
- `matplotlib, seaborn` - å¯è§†åŒ–
- `yfinance` - è‚¡ç¥¨æ•°æ®è·å–

**æ‰‹åŠ¨å®‰è£…é¢å¤–ä¾èµ–** (å¦‚éœ€è¦):

```bash
python run_in_docker.py --command "pip install lightgbm optuna ta-lib"
```

## ğŸ“ˆ ä½¿ç”¨æ–¹æ³•

### æ ¸å¿ƒè„šæœ¬è¯´æ˜

- **`run_in_docker.py`** - Dockerç¯å¢ƒæ§åˆ¶è„šæœ¬
- **`tsla_analysis_2025.py`** - ä¸»è¦åˆ†æè„šæœ¬ (å¯ä¿®æ”¹è‚¡ç¥¨ä»£ç )

### åŸºæœ¬ä½¿ç”¨æ–¹å¼

#### 1. å¿«é€Ÿè‚¡ç¥¨åˆ†æ

```bash
# åˆ†æTSLAè‚¡ç¥¨ (é»˜è®¤)
python run_in_docker.py --command "python tsla_analysis_2025.py"

# åˆ†æå…¶ä»–è‚¡ç¥¨ (ä¿®æ”¹è„šæœ¬ä¸­çš„è‚¡ç¥¨ä»£ç )
# å°†è„šæœ¬ä¸­çš„ "TSLA" æ”¹ä¸º "AAPL", "MSFT", "GOOGL" ç­‰
```

#### 2. äº¤äº’å¼åˆ†æ

```bash
# è¿›å…¥Dockerå®¹å™¨è¿›è¡Œäº¤äº’å¼åˆ†æ
python run_in_docker.py

# åœ¨å®¹å™¨ä¸­è¿è¡Œ
python tsla_analysis_2025.py
```

#### 3. è‡ªå®šä¹‰å‘½ä»¤æ‰§è¡Œ

```bash
# æ£€æŸ¥æ¨¡å‹çŠ¶æ€
python run_in_docker.py --command "python -c 'import qlib.contrib.model.gbdt as gbdt; print(\"âœ… GBDTæ¨¡å‹å¯ç”¨\")'"

# è·å–è‚¡ç¥¨æ•°æ®
python run_in_docker.py --command "python -c 'import yfinance as yf; print(yf.download(\"AAPL\", period=\"1mo\").tail())'"

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
python run_in_docker.py --command "python -c 'import sys; print(f\"Python: {sys.version}\"); import torch; print(f\"PyTorch: {torch.__version__}\")'"
```

### é«˜çº§åŠŸèƒ½

#### 1. Jupyter Notebookåˆ†æ

```bash
# å¯åŠ¨Jupyter NotebookæœåŠ¡
python run_in_docker.py --jupyter

# è®¿é—® http://localhost:8888 è¿›è¡Œäº¤äº’å¼åˆ†æ
```

#### 2. æ‰¹é‡è‚¡ç¥¨åˆ†æ

åˆ›å»ºæ‰¹é‡åˆ†æè„šæœ¬ï¼š

```python
# batch_analysis.py
stocks = ["AAPL", "MSFT", "GOOGL", "AMZN", "TSLA"]
for stock in stocks:
    # ä¿®æ”¹åˆ†æè„šæœ¬ä¸­çš„è‚¡ç¥¨ä»£ç å¹¶è¿è¡Œ
    print(f"æ­£åœ¨åˆ†æ {stock}...")
```

```bash
python run_in_docker.py --script batch_analysis.py
```

#### 3. å®šåˆ¶åŒ–åˆ†æ

ä¿®æ”¹ `tsla_analysis_2025.py` ä¸­çš„å‚æ•°ï¼š

- **è‚¡ç¥¨ä»£ç **: ç¬¬185è¡Œ `tsla_data = yf.download("TSLA", ...)`
- **åˆ†æå‘¨æœŸ**: ç¬¬182è¡Œ `start_date = datetime(2023, 1, 1)`
- **é¢„æµ‹å¤©æ•°**: prepare_ml_dataå‡½æ•°ä¸­çš„ `prediction_days=5`

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

åˆ†æå®Œæˆåï¼Œç³»ç»Ÿä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
ğŸ“ /workspace/output/
â”œâ”€â”€ ğŸ“Š plots/
â”‚   â””â”€â”€ tsla_comprehensive_analysis.png  # ç»¼åˆåˆ†æå›¾è¡¨
â””â”€â”€ ğŸ“„ tsla_analysis_report.md          # è¯¦ç»†åˆ†ææŠ¥å‘Š
```

### æŠ¥å‘Šå†…å®¹åŒ…æ‹¬

- **ğŸ’¡ æŠ•èµ„å»ºè®®æ€»ç»“** - æ ¸å¿ƒå»ºè®®å’Œå…³é”®æŒ‡æ ‡
- **ğŸ“ˆ æŠ€æœ¯åˆ†æè¯¦æƒ…** - 5ç§æŠ€æœ¯æŒ‡æ ‡çš„è¯¦ç»†åˆ†æ
- **ğŸ¤– æœºå™¨å­¦ä¹ é¢„æµ‹** - 15ä¸ªæ¨¡å‹çš„é¢„æµ‹ç»“æœ
- **âš–ï¸ åŠ¨æ€æƒé‡åˆ†é…** - æ¨¡å‹æƒé‡åˆ†é…è¯¦æƒ…
- **âš ï¸ é£é™©æç¤º** - æŠ•èµ„é£é™©è¯„ä¼°

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Dockerå®¹å™¨æ— æ³•å¯åŠ¨**

   ```bash
   # æ£€æŸ¥DockerçŠ¶æ€
   docker --version
   docker ps -a
   
   # é‡æ–°å¯åŠ¨Docker Desktop
   # æ¸…ç†æ—§å®¹å™¨
   docker container prune
   ```

2. **æ¨¡å‹å¯¼å…¥å¤±è´¥**

   ```bash
   # æ£€æŸ¥æ¨¡å‹å¯¼å…¥çŠ¶æ€
   python run_in_docker.py --command "python -c 'import qlib.contrib.model.gbdt; print(\"âœ… qlibæ¨¡å‹æ­£å¸¸\")'"
   
   # é‡æ–°å®‰è£…ä¾èµ–
   python run_in_docker.py --command "pip install --upgrade qlib torch xgboost catboost"
   ```

3. **è‚¡ç¥¨æ•°æ®è·å–å¤±è´¥**

   ```bash
   # æ£€æŸ¥ç½‘ç»œè¿æ¥
   python run_in_docker.py --command "python -c 'import yfinance as yf; print(yf.download(\"AAPL\", period=\"1d\"))'"
   
   # æ›´æ¢æ•°æ®æºæˆ–æ£€æŸ¥ä»£ç†è®¾ç½®
   ```

4. **å†…å­˜ä¸è¶³**

   ```bash
   # å¢åŠ Dockerå†…å­˜é™åˆ¶ (Docker Desktopè®¾ç½®)
   # æˆ–å‡å°‘æ¨¡å‹æ•°é‡ï¼Œä¿®æ”¹è„šæœ¬ä¸­çš„model_importsåˆ—è¡¨
   ```

5. **ç«¯å£å†²çª**

   ```bash
   # ä¿®æ”¹ç«¯å£æ˜ å°„
   docker run -p 8889:8888 ...  # ä½¿ç”¨8889ç«¯å£
   ```

### è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs qlib_jupyter

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it qlib_jupyter bash

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
python run_in_docker.py --command "python -c 'import psutil; print(f\"å†…å­˜ä½¿ç”¨: {psutil.virtual_memory().percent}%\")'"

# æµ‹è¯•æ¨¡å‹å¯¼å…¥
python run_in_docker.py --command "python -c 'from sklearn.ensemble import RandomForestRegressor; print(\"âœ… sklearnæ­£å¸¸\")'"
```

## ğŸ“š é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ¨¡å‹é…ç½®

åœ¨ `tsla_analysis_2025.py` ä¸­ä¿®æ”¹æ¨¡å‹å‚æ•°ï¼š

```python
# æ·»åŠ æ–°çš„ç¬¬ä¸‰æ–¹æ¨¡å‹
('CustomModel', 'sklearn.ensemble', 'ExtraTreesRegressor', 'sklearn_direct'),

# ä¿®æ”¹æ¨¡å‹å‚æ•°
elif model_name == 'RandomForestModel':
    model = model_class(n_estimators=200, max_depth=15, random_state=42)
```

### æŠ€æœ¯æŒ‡æ ‡è‡ªå®šä¹‰

```python
# æ·»åŠ æ–°çš„æŠ€æœ¯æŒ‡æ ‡
df['STOCH_K'] = stoch_k_calculation(df)
df['ATR'] = atr_calculation(df)

# ä¿®æ”¹ä¿¡å·é€»è¾‘
if latest['RSI'] < 25:  # æ›´ä¸¥æ ¼çš„è¶…å–æ¡ä»¶
    score += 3
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [Microsoft Qlib](https://github.com/microsoft/qlib) - æ ¸å¿ƒé‡åŒ–æ¡†æ¶
- [PyTorch](https://pytorch.org/) - æ·±åº¦å­¦ä¹ æ”¯æŒ
- [scikit-learn](https://scikit-learn.org/) - æœºå™¨å­¦ä¹ ç®—æ³•
- [yfinance](https://github.com/ranaroussi/yfinance) - è‚¡ç¥¨æ•°æ®æº

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. åœ¨ GitHub ä¸Šæå‡º Issue
3. æŸ¥çœ‹é¡¹ç›® Wiki è·å–æ›´å¤šæ–‡æ¡£

---

**âš¡ å¿«é€Ÿå¼€å§‹å‘½ä»¤æ€»ç»“**:

```bash
# 1. å¯åŠ¨Dockerç¯å¢ƒ
docker-compose up -d

# 2. è¿è¡ŒTSLAåˆ†æ
python run_in_docker.py --command "python tsla_analysis_2025.py"

# 3. æŸ¥çœ‹ç»“æœ
python run_in_docker.py --command "ls -la /workspace/output/"
```

ğŸ¯ **ç°åœ¨æ‚¨æ‹¥æœ‰äº†ä¸€ä¸ªä¸“ä¸šçº§çš„é‡åŒ–åˆ†æç³»ç»Ÿï¼** ğŸš€
